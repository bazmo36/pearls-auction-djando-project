{% extends "base.html" %} 
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/auction_list.css' %}">

<div class="auction-list-container">
  <h1 class="main-title">Pearl Auctions</h1>

  {% if active_auctions or upcoming_auctions or closed_auctions %}

    {% if active_auctions %}
      <div class="auction-section active">
        <h2>ðŸŸ¢ Active Auctions</h2>
        <div class="auction-grid">
          {% for auction in active_auctions %}
            <a href="{% url 'auction_detail' auction.pearl.pk %}" class="auction-card">
              {% if auction.pearl.image %}
                <div class="auction-image-container">
                  <img src="{{ auction.pearl.image.url }}" alt="{{ auction.pearl.name }}">
                </div>
              {% endif %}
              <div class="auction-info">
                <p class="countdown-label">Ends in:</p>
                <p class="countdown"
                   data-start="{{ auction.start_time|date:'c' }}"
                   data-end="{{ auction.end_time|date:'c' }}">
                </p>
                <p class="price">Current Price: {{ auction.current_price }}</p>
              </div>
            </a>
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% if upcoming_auctions %}
      <div class="auction-section upcoming">
        <h2>ðŸ•’ Upcoming Auctions</h2>
        <div class="auction-grid">
          {% for auction in upcoming_auctions %}
            <a href="{% url 'auction_detail' auction.pearl.pk %}" class="auction-card">
              {% if auction.pearl.image %}
                <div class="auction-image-container">
                  <img src="{{ auction.pearl.image.url }}" alt="{{ auction.pearl.name }}">
                </div>
              {% endif %}
              <div class="auction-info">
                <p class="countdown-label">Starts in:</p>
                <p class="countdown"
                   data-start="{{ auction.start_time|date:'c' }}"
                   data-end="{{ auction.end_time|date:'c' }}">
                </p>
              </div>
            </a>
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% if closed_auctions %}
      <div class="auction-section closed">
        <h2>ðŸ”´ Closed Auctions</h2>
        <div class="auction-grid">
          {% for auction in closed_auctions %}
            <a href="{% url 'auction_detail' auction.pearl.pk %}" class="auction-card">
              {% if auction.pearl.image %}
                <div class="auction-image-container">
                  <img src="{{ auction.pearl.image.url }}" alt="{{ auction.pearl.name }}">
                </div>
              {% endif %}
              <div class="auction-info">
                <p class="ended-label">Ended on: {{ auction.end_time|date:"D M d, Y H:i" }}</p>
              </div>
            </a>
          {% endfor %}
        </div>
      </div>
    {% endif %}

  {% else %}
    <p class="no-auctions">No auctions available at this time.</p>
  {% endif %}
</div>
{% endblock %}
